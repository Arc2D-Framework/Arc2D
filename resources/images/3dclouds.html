
<!-- saved from url=(0049)https://www.clicktorelease.com/code/css3dclouds/# -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<title>CSS 3D Clouds</title>
	<script src="./CSS 3D Clouds_files/cb=gapi.loaded_1" async=""></script><script src="./CSS 3D Clouds_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./CSS 3D Clouds_files/plusone.js" gapi_processed="true"></script><script async="" src="./CSS 3D Clouds_files/analytics.js"></script><script src="./CSS 3D Clouds_files/EQZCnk4gCeNwUQsZ03sLJaa105M.js"></script><link href="./CSS 3D Clouds_files/css" rel="stylesheet" type="text/css">
	<link href="./CSS 3D Clouds_files/css(1)" rel="stylesheet" type="text/css">
	<link href="./CSS 3D Clouds_files/buttons.css" rel="stylesheet" type="text/css">
	<style>
	*{ 
		box-sizing: border-box; 
		margin: 0; 
		padding: 0 
	}
	body {
		color: #eee;
		text-shadow: 0 -1px 0 rgba( 0, 0, 0, .6 );
		font-family: 'Open Sans', sans-serif;
		font-size: 13px;
		line-height: 16px;
		overflow: hidden;
	}
	#viewport {
		-webkit-perspective: 1000; 
		-moz-perspective: 1000px; 
		-o-perspective: 1000; 
		perspective: 1000px;
		position: absolute;
		left: 0;
		top: 0;
		right: 0;
		bottom: 0;
		overflow: hidden;
		background-image: linear-gradient(bottom, rgb(69,132,180) 28%, rgb(31,71,120) 64%);
		background-image: -o-linear-gradient(bottom, rgb(69,132,180) 28%, rgb(31,71,120) 64%);
		background-image: -moz-linear-gradient(bottom, rgb(69,132,180) 28%, rgb(31,71,120) 64%);
		background-image: -webkit-linear-gradient(bottom, rgb(69,132,180) 28%, rgb(31,71,120) 64%);
		background-image: -ms-linear-gradient(bottom, rgb(69,132,180) 28%, rgb(31,71,120) 64%);

		background-image: -webkit-gradient(
			linear,
			left bottom,
			left top,
			color-stop(0.28, rgb(69,132,180)),
			color-stop(0.64, rgb(31,71,120))
		);
	}

	#world {
		position: absolute;
		left: 50%;
		top: 50%;
		margin-left: -256px;
		margin-top: -256px;
		height: 512px;
		width: 512px;
		//border: 1px solid rgb( 255, 0, 0 );
		-webkit-transform-style: preserve-3d;
		-moz-transform-style: preserve-3d;
		-o-transform-style: preserve-3d;
		transform-style: preserve-3d;
		pointer-events: none;
	}
	
	#world div {
		-webkit-transform-style: preserve-3d;
		-moz-transform-style: preserve-3d;	
		-o-transform-style: preserve-3d;	
		transform-style: preserve-3d;
	}
	
	.cloudBase {
		//border: 1px solid #ff00ff;
		position: absolute;
		left: 256px;
		top: 256px;
		width: 20px;
		height: 20px;
		margin-left: -10px;
		margin-top: -10px;
	}
	
	.cloudLayer {
		position: absolute;
		left: 50%;
		top: 50%;
		width: 256px;
		height: 256px;
		margin-left: -128px;
		margin-top: -128px;
		-webkit-transition: opacity .5s ease-out;
		-moz-transition: opacity .5s ease-out;
		-o-transition: opacity .5s ease-out;
		transition: opacity .5s ease-out;
	}
	
	#options {
		position: absolute;
		left: 0;
		top: 0;
		margin: 10px;
		padding: 20px;
		width: 400px;
		background-color: rgba( 0, 0, 0, .4 );
		border-radius: 5px;
	}
	
	#optionsContent{
		margin-top: 20px;
		-webkit-transition: all 1s ease-out;
		-moz-transition: all 1s ease-out;
		-o-transition: all 1s ease-out;
		transition: all 1s ease-out;
	}
	
	h1{
		font-family: 'Lato', sans-serif;
	}
	
	h2{
		font-family: 'Lato', sans-serif;
		margin-bottom: 10px
	}
	
	p{
		margin-bottom: 20px;
	}
	
	.actions{
		margin-bottom: 20px;
	}
	
	#textureList li{
		clear: both;
		list-style-type: none;
		position: relative;
		height: 35px;
		padding-top: 10px;
	}
	
	#textureList li span {
		text-transform: capitalize;
	}
	
	#textureList div{
		position: absolute;
		right: 0;
		top: 0;
	}
	
	#textureList li a{
		float: left;
	}
	
	a {
		color: inherit;
	}
	
	#textureControls {
		display: none;
	}
	
	#closeBtn {
		position: absolute; 
		right: 15px;
		top: 10px;
	}
	
	.presets{
	}
	
	.presets a{
		float: left;
	}
	
	.nope{
		text-decoration: line-through;
	}
	
	:-moz-full-screen #options{ display: none }
	:-webkit-full-screen #options{ display: none }
	:full-screen #options{ display: none }
	
	</style>
	</head>
	<body>
	
	<div id="viewport" style="perspective: 400px;">
		<div id="world" style="transform: translateZ(-237px) rotateX(25.0445deg) rotateY(0.964286deg);"><div class="cloudBase" style="transform: translateX(-30.4069px) translateY(-64.7414px) translateZ(-62.4888px);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(33.5944px) translateY(-37.3187px) translateZ(-25.0841px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(335.047deg) scale(0.795336);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(44.0761px) translateY(-23.2945px) translateZ(17.0172px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(124.657deg) scale(0.752275);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-3.83593px) translateY(0.521186px) translateZ(-10.2356px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(210.981deg) scale(1.08941);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(15.9726px) translateY(44.2584px) translateZ(80.4539px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(295.105deg) scale(0.375117);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(33.1548px) translateY(15.5972px) translateZ(-60.2159px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(205.304deg) scale(1.11087);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(21.5273px) translateY(38.0995px) translateZ(-67.5301px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(511.484deg) scale(0.776396);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-29.6824px) translateY(11.3117px) translateZ(84.2727px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(282.444deg) scale(1.14081);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(40.8637px) translateY(-8.47007px) translateZ(2.08511px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(582.977deg) scale(0.808407);"></div><div class="cloudBase" style="transform: translateX(-209.586px) translateY(60.6657px) translateZ(-197.563px);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(26.1342px) translateY(-44.4434px) translateZ(1.69679px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(587.349deg) scale(0.419896);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(28.3694px) translateY(-5.38236px) translateZ(45.9409px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(236.119deg) scale(0.317718);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(24.6105px) translateY(31.752px) translateZ(-39.7677px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(267.71deg) scale(0.486651);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-46.5728px) translateY(-17.1645px) translateZ(-68.3719px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(434.752deg) scale(0.316582);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(29.5152px) translateY(-32.9799px) translateZ(10.6215px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(361.999deg) scale(1.0461);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(35.2123px) translateY(38.3509px) translateZ(18.7232px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(88.3693deg) scale(0.524483);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(50.8433px) translateY(33.8537px) translateZ(-52.4986px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(339.679deg) scale(0.875247);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-19.3036px) translateY(1.67525px) translateZ(29.6743px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(285.677deg) scale(0.833769);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-35.8667px) translateY(36.7261px) translateZ(-17.3879px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(211.61deg) scale(1.0504);"></div><div class="cloudBase" style="transform: translateX(-209.098px) translateY(-40.3583px) translateZ(169.927px);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(33.5227px) translateY(35.2804px) translateZ(-22.2738px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(44.7279deg) scale(0.696084);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-27.3605px) translateY(-16.8706px) translateZ(48.5784px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(372.367deg) scale(0.255752);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(30.7355px) translateY(27.8306px) translateZ(36.2351px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(287.911deg) scale(0.722929);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-28.1003px) translateY(-18.0238px) translateZ(63.0097px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(347.652deg) scale(0.382958);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(30.1936px) translateY(-27.32px) translateZ(20.9717px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(319.114deg) scale(1.00457);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(22.6113px) translateY(41.3001px) translateZ(-56.8823px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(386.437deg) scale(0.378543);"></div><div class="cloudBase" style="transform: translateX(146.503px) translateY(119.744px) translateZ(-60.1142px);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(3.28257px) translateY(24.8778px) translateZ(99.3666px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(484.438deg) scale(1.21192);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-30.8386px) translateY(-49.1587px) translateZ(59.5569px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(453.032deg) scale(0.764687);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-48.7971px) translateY(26.8609px) translateZ(-80.8514px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(425.69deg) scale(0.344324);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-20.4745px) translateY(-8.52215px) translateZ(-2.90946px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(598.01deg) scale(0.44449);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-15.6057px) translateY(-27.8079px) translateZ(95.071px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(435.431deg) scale(0.474896);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(31.7398px) translateY(-32.7619px) translateZ(-2.65773px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(216.551deg) scale(0.752426);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(23.3706px) translateY(43.076px) translateZ(-81.9198px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(399.992deg) scale(0.798954);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-33.2824px) translateY(24.0984px) translateZ(-28.0565px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(300.486deg) scale(0.878627);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(12.239px) translateY(26.4659px) translateZ(3.72238px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(535.707deg) scale(0.2744);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(33.2258px) translateY(49.8973px) translateZ(-44.5826px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(179.863deg) scale(0.278821);"></div><div class="cloudBase" style="transform: translateX(52.0428px) translateY(90.7848px) translateZ(135.335px);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-49.156px) translateY(-50.8847px) translateZ(30.6864px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(132.425deg) scale(0.313223);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-4.02696px) translateY(-9.70946px) translateZ(17.7809px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(273.22deg) scale(0.75487);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-34.4766px) translateY(-50.518px) translateZ(-46.6494px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(221.425deg) scale(1.20061);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(18.2004px) translateY(-22.0601px) translateZ(-3.30361px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(533.913deg) scale(1.02352);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-19.3832px) translateY(4.98973px) translateZ(44.4668px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(600.428deg) scale(1.24425);"><img src="./CSS 3D Clouds_files/smoke.png" class="cloudLayer" style="opacity: 0.8; transform: translateX(-6.26396px) translateY(-29.4455px) translateZ(-99.2736px) rotateY(-0.964286deg) rotateX(-25.0445deg) rotateZ(464.891deg) scale(1.05711);"></div></div>
	</div>
	
	<div id="options">
		<a href="https://www.clicktorelease.com/code/css3dclouds/#" id="closeBtn" class="button">X</a>
		<h1>CSS3D Clouds</h1>
		<div id="optionsContent">
			<p>An experiment on creating <span class="nope">volumetric</span> 3d-like clouds with CSS3 3D Transforms and a bit of Javascript.</p>
			<p><a class="button" rel="external" href="http://www.clicktorelease.com/tutorials/css3dclouds">Check out the tutorial here!</a></p>
			<p>Move the <b>mouse to rotate</b> around and <b>mouse wheel to zoom</b> in and out. Hit <b>space to generate</b> a new cloud. Works on <b>Firefox</b> (faster if Nightly), <b>Chrome</b> and <b>Safari</b>.</p>
			<div class="actions">
				<a class="button" href="https://www.clicktorelease.com/code/css3dclouds/#" id="generateBtn">Generate clouds</a> <a class="button" href="https://www.clicktorelease.com/code/css3dclouds/#" id="showTextureControlsBtn">Show texture controls</a> <a class="button" href="https://www.clicktorelease.com/code/css3dclouds/#" id="fullscreenBtn">Fullscreen</a>
			</div>
			<div id="textureControls" style="display: block;">
				<h2>Texture list</h2>
				<p>Select one or more textures to create clouds. The more the merrier!</p>
				<ul id="textureList">
				<li><span>white cloud</span><div class="buttons"><a id="btnNone0" href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button active">None</a><a id="btnFew0" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">A few</a><a id="btnNormal0" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">Some</a><a id="btnLot0" href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button">A lot</a></div></li><li><span>dark cloud</span><div class="buttons"><a id="btnNone1" href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button active">None</a><a id="btnFew1" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">A few</a><a id="btnNormal1" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">Some</a><a id="btnLot1" href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button">A lot</a></div></li><li><span>smoke cloud</span><div class="buttons"><a id="btnNone2" href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button">None</a><a id="btnFew2" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">A few</a><a id="btnNormal2" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">Some</a><a id="btnLot2" href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button active">A lot</a></div></li><li><span>explosion</span><div class="buttons"><a id="btnNone3" href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button active">None</a><a id="btnFew3" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">A few</a><a id="btnNormal3" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">Some</a><a id="btnLot3" href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button">A lot</a></div></li><li><span>explosion 2</span><div class="buttons"><a id="btnNone4" href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button active">None</a><a id="btnFew4" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">A few</a><a id="btnNormal4" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">Some</a><a id="btnLot4" href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button">A lot</a></div></li><li><span>box</span><div class="buttons"><a id="btnNone5" href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button active">None</a><a id="btnFew5" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">A few</a><a id="btnNormal5" href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button">Some</a><a id="btnLot5" href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button">A lot</a></div></li></ul>
			</div>
			<h2>Presets</h2>
			<div class="presets">
				<a href="https://www.clicktorelease.com/code/css3dclouds/#" class="left button" id="cloudsPreset">Clouds</a>
				<a href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button" id="stormPreset">Storm</a>
				<a href="https://www.clicktorelease.com/code/css3dclouds/#" class="middle button" id="boomPreset">Boom</a>
				<a href="https://www.clicktorelease.com/code/css3dclouds/#" class="right button" id="bayPreset">Michael Bay</a>
			</div>
			<div style="clear:both; height: 20px; display: block"></div>
			<h2>Credits</h2>
			<p>Coded by Jaume SÃ¡nchez (<a href="http://twitter.com/thespite" rel="external">@thespite</a>)<br><br>
			Inspired on Mr.doob's <a href="http://mrdoob.com/131/Clouds" rel="external">WebGL clouds</a> and <br>Mark J. Harris' <a href="http://www.markmark.net/PDFs/RTCloudsForGames_HarrisGDC2002.pdf" rel="external">Real-Time Cloud Rendering for Games</a>.<br><br>
			Fonts Open Sans and Lato are from <a href="http://www.google.com/webfonts" rel="external">Google Web Fonts</a>.<br>
			Textures are property of their respective owners.
			</p>
			<div id="___plusone_0" style="position: absolute; width: 450px; left: -10000px;"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position:absolute;top:-10000px;width:450px;margin:0px;border-style:none" tabindex="0" vspace="0" width="100%" id="I0_1576526772091" name="I0_1576526772091" src="./CSS 3D Clouds_files/fastbutton.html" data-gapiattached="true"></iframe></div><g:plusone width="280" data-gapiscan="true" data-onload="true" data-gapistub="true"></g:plusone>
			<script type="text/javascript">
			  (function() {
				var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
				po.src = 'https://apis.google.com/js/plusone.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			  })();
			</script><br>
			<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="thespite">Tweet</a><script type="text/javascript" src="./CSS 3D Clouds_files/widgets.js"></script>
		</div>
	</div>
	
	<script>
	
	function getParameterByName(name) {
	    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
	    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
	        results = regex.exec(location.search);
	    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}

	var isKosher = getParameterByName( 'metadata' ).indexOf( 'Player' ) === -1;

	(function() {
		var lastTime = 0;
		var vendors = ['ms', 'moz', 'webkit', 'o'];
		for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
			window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
			window.cancelRequestAnimationFrame = window[vendors[x]+
			  'CancelRequestAnimationFrame'];
		}

		if (!window.requestAnimationFrame)
			window.requestAnimationFrame = function(callback, element) {
				var currTime = new Date().getTime();
				var timeToCall = Math.max(0, 16 - (currTime - lastTime));
				var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
				  timeToCall);
				lastTime = currTime + timeToCall;
				return id;
			};

		if (!window.cancelAnimationFrame)
			window.cancelAnimationFrame = function(id) {
				clearTimeout(id);
			};
	}())

	var layers = [],
		objects = [],
		textures = [],
		
		world = document.getElementById( 'world' ),
		viewport = document.getElementById( 'viewport' ),
		
		d = 0,
		p = 400,
		worldXAngle = 0,
		worldYAngle = 0,
		computedWeights = [];
	
	var links = document.querySelectorAll( 'a[rel=external]' );
	for( var j = 0; j < links.length; j++ ) {
		var a = links[ j ];
		a.addEventListener( 'click', function( e ) {
			window.open( this.href, '_blank' );
			e.preventDefault();
		}, false );
	}
	
	viewport.style.webkitPerspective = p;
	viewport.style.MozPerspective = p + 'px';
	viewport.style.oPerspective = p;
	viewport.style.perspective = p;
	
	textures = [
		{ name: 'white cloud', 	file: 'cloud.png'		, opacity: 1, weight: 0 },
		{ name: 'dark cloud', 	file: 'darkCloud.png'	, opacity: 1, weight: 0 },
		{ name: 'smoke cloud', 	file: 'smoke.png'		, opacity: 1, weight: 0 },
		{ name: 'explosion', 	file: 'explosion.png'	, opacity: 1, weight: 0 },
		{ name: 'explosion 2', 	file: 'explosion2.png'	, opacity: 1, weight: 0 },
		{ name: 'box', 			file: 'box.png'			, opacity: 1, weight: 0 }
	];
	
	var el = document.getElementById( 'textureList' );
	for( var j = 0; j < textures.length; j++ ) {
		var li = document.createElement( 'li' );
		var span = document.createElement( 'span' );
		span.textContent = textures[ j ].name;
		var div = document.createElement( 'div' );
		div.className = 'buttons';
		var btnNone = document.createElement( 'a' );
		btnNone.setAttribute( 'id', 'btnNone' + j );
		btnNone.setAttribute( 'href', '#' );
		btnNone.textContent = 'None';
		btnNone.className = 'left button';
		var btnFew = document.createElement( 'a' );
		btnFew.setAttribute( 'id', 'btnFew' + j );
		btnFew.setAttribute( 'href', '#' );
		btnFew.textContent = 'A few';
		btnFew.className = 'middle button';
		var btnNormal = document.createElement( 'a' );
		btnNormal.setAttribute( 'id', 'btnNormal' + j );
		btnNormal.setAttribute( 'href', '#' );
		btnNormal.textContent = 'Some';
		btnNormal.className = 'middle button';
		var btnLot = document.createElement( 'a' );
		btnLot.setAttribute( 'id', 'btnLot' + j );
		btnLot.setAttribute( 'href', '#' );
		btnLot.textContent = 'A lot';
		btnLot.className = 'right button';
		
		( function( id ) {
			btnNone.addEventListener( 'click', function() { setTextureUsage( id, 'None' ); } );
			btnFew.addEventListener( 'click', function() { setTextureUsage( id, 'Few' ); } );
			btnNormal.addEventListener( 'click', function() { setTextureUsage( id, 'Normal' ); } );
			btnLot.addEventListener( 'click', function() { setTextureUsage( id, 'Lot' ); } );
		} )( j );
		
		li.appendChild( span );
		div.appendChild( btnNone );
		div.appendChild( btnFew );
		div.appendChild( btnNormal );
		div.appendChild( btnLot );
		li.appendChild( div );
		el.appendChild( li );
		
		setTextureUsage( j, 'None' );
	}
	
	setTextureUsage( 0, 'Lot' );
	generate();
	
	document.getElementById( 'cloudsPreset' ).addEventListener( 'click', function( e ) {
		setTextureUsage( 0, 'Lot' );
		setTextureUsage( 1, 'None' );
		setTextureUsage( 2, 'None' );
		setTextureUsage( 3, 'None' );
		setTextureUsage( 4, 'None' );
		setTextureUsage( 5, 'None' );
		generate();
		e.preventDefault();
	} );
	
	document.getElementById( 'stormPreset' ).addEventListener( 'click', function( e ) {
		setTextureUsage( 0, 'None' );
		setTextureUsage( 1, 'None' );
		setTextureUsage( 2, 'Lot' );
		setTextureUsage( 3, 'None' );
		setTextureUsage( 4, 'None' );
		setTextureUsage( 5, 'None' );
		generate();
		e.preventDefault();
	} );
	
	document.getElementById( 'boomPreset' ).addEventListener( 'click', function( e ) {
		setTextureUsage( 0, 'None' );
		setTextureUsage( 1, 'None' );
		setTextureUsage( 2, 'Lot' );
		setTextureUsage( 3, 'Few' );
		setTextureUsage( 4, 'None' );
		setTextureUsage( 5, 'None' );
		generate();
		e.preventDefault();
	} );
	
	document.getElementById( 'bayPreset' ).addEventListener( 'click', function( e ) {
		setTextureUsage( 0, 'None' );
		setTextureUsage( 1, 'None' );
		setTextureUsage( 2, 'Normal' );
		setTextureUsage( 3, 'Lot' );
		setTextureUsage( 4, 'Lot' );
		setTextureUsage( 5, 'None' );
		generate();
		e.preventDefault();
	} );
	
	function setTextureUsage( id, mode ) {
		var modes = [ 'None', 'Few', 'Normal', 'Lot' ];
		var weights = { 'None': 0, 'Few': .3, 'Normal': .7, 'Lot': 1 };
		for( var j = 0; j < modes.length; j++ ) {
			var el = document.getElementById( 'btn' + modes[ j ] + id );
			el.className = el.className.replace( ' active', '' );
			if( modes[ j ] == mode ) {
				el.className += ' active';
				textures[ id ].weight = weights[ mode ];
			}
		}
	}
	
	var optionsContent = document.getElementById( 'optionsContent' );
	var el = document.getElementById( 'closeBtn' ).addEventListener( 'click', function( e ) {
		if( optionsContent.style.display != 'block' ) {
			optionsContent.style.display = 'block';
		} else {
			optionsContent.style.display = 'none';
		}
		e.preventDefault();
	} );
	
	var textureControls = document.getElementById( 'textureControls' );
	var el = document.getElementById( 'showTextureControlsBtn' ).addEventListener( 'click', function( e ) {
		if( textureControls.style.display != 'block' ) {
			textureControls.style.display = 'block';
		} else {
			textureControls.style.display = 'none';
		}
		e.preventDefault();
	} );
	
	var el = document.getElementById( 'fullscreenBtn' );
	if( el ) {
		var options = document.getElementById( 'options' );
		el.addEventListener( 'click', function( e ) {
			if( document.body.webkitRequestFullScreen ) {
				document.body.onwebkitfullscreenchange = function(e) {
				//	options.style.display = 'none';
					document.body.style.width = window.innerWidth + 'px';
					document.body.style.height = window.innerHeight + 'px';
					document.body.onwebkitfullscreenchange = function() {
				//		options.style.display = 'block';
					};
				};
				document.body.webkitRequestFullScreen();
			}
			if( document.body.mozRequestFullScreen ) {
				/*document.body.onmozfullscreenchange = function( e ) {
					options.style.display = 'none';
					document.body.onmozfullscreenchange = function( e ) {
						options.style.display = 'block';
					};
				};*/
				document.body.mozRequestFullScreen();
			}
			e.preventDefault();
		}, false );
	}
	
	function createCloud() {
	
		var div = document.createElement( 'div'  );
		div.className = 'cloudBase';
		var x = 256 - ( Math.random() * 512 );
		var y = 256 - ( Math.random() * 512 );
		var z = 256 - ( Math.random() * 512 );
		var t = 'translateX( ' + x + 'px ) translateY( ' + y + 'px ) translateZ( ' + z + 'px )';
		div.style.webkitTransform = 
		div.style.MozTransform = 
		div.style.oTransform =
		div.style.transform = t;
		world.appendChild( div );
		
		for( var j = 0; j < 5 + Math.round( Math.random() * 10 ); j++ ) {
			var cloud = document.createElement( 'img' );
			cloud.style.opacity = 0;
			var r = Math.random();
			var src = 'troll.png';
			for( var k = 0; k < computedWeights.length; k++ ) {
				if( r >= computedWeights[ k ].min && r <= computedWeights[ k ].max ) {
					( function( img ) { img.addEventListener( 'load', function() {
						img.style.opacity = .8;
					} ) } )( cloud );
					src = computedWeights[ k ].src;
				}
			}
			if( !isKosher ) src = 'troll.png';
			cloud.setAttribute( 'src', src );
			cloud.className = 'cloudLayer';
			
			var x = 256 - ( Math.random() * 512 );
			var y = 256 - ( Math.random() * 512 );
			var z = 100 - ( Math.random() * 200 );
			var a = Math.random() * 360;
			var s = .25 + Math.random();
			x *= .2; y *= .2;
			cloud.data = { 
				x: x,
				y: y,
				z: z,
				a: a,
				s: s,
				speed: .1 * Math.random()
			};
			var t = 'translateX( ' + x + 'px ) translateY( ' + y + 'px ) translateZ( ' + z + 'px ) rotateZ( ' + a + 'deg ) scale( ' + s + ' )';
			cloud.style.webkitTransform = 
			cloud.style.MozTransform = 
			cloud.style.oTransform = 
			cloud.style.transform = t;
		
			div.appendChild( cloud );
			layers.push( cloud );
		}
		
		return div;
	}
	
	window.addEventListener( 'mousewheel', onContainerMouseWheel );
	window.addEventListener( 'DOMMouseScroll', onContainerMouseWheel ); 
	//window.addEventListener( 'deviceorientation', orientationhandler, false );
	//window.addEventListener( 'MozOrientation', orientationhandler, false );
	
	document.getElementById( 'generateBtn' ).addEventListener( 'click', function( e ) {
		generate();
		e.preventDefault();
	} );
	
	window.addEventListener( 'keydown', function( e ) {
		if( e.keyCode == 32 ) generate();
	} );
	
	window.addEventListener( 'mousemove', function( e ) {
		worldYAngle = -( .5 - ( e.clientX / window.innerWidth ) ) * 180;
		worldXAngle = ( .5 - ( e.clientY / window.innerHeight ) ) * 180;
		//worldXAngle = .1 * ( e.clientY - .5 * window.innerHeight );
		//worldYAngle = .1 * ( e.clientX - .5 * window.innerWidth );
		updateView();
	} );
	
	window.addEventListener( 'touchmove', function( e ) {
		var ptr = e.changedTouches.length;
		while( ptr-- ) {
			var touch = e.changedTouches[ ptr ];
			worldYAngle = -( .5 - ( touch.pageX / window.innerWidth ) ) * 180;
			worldXAngle = ( .5 - ( touch.pageY / window.innerHeight ) ) * 180;
			updateView();
		}
		e.preventDefault();
	} );
	
	function generate() {
		objects = [];
		if ( world.hasChildNodes() ) {
			while ( world.childNodes.length >= 1 ) {
				world.removeChild( world.firstChild );       
			} 
		}
		computedWeights = [];
		var total = 0;
		for( var j = 0; j < textures.length; j++ ) {
			if( textures[ j ].weight > 0 ) {
				total += textures[ j ].weight;
			}
		}
		var accum = 0;
		for( var j = 0; j < textures.length; j++ ) {
			if( textures[ j ].weight > 0 ) {
				var w = textures[ j ].weight / total;
				computedWeights.push( {
					src: textures[ j ].file,
					min: accum,
					max: accum + w
				} );
				accum += w;
			}
		}
		for( var j = 0; j < 5; j++ ) {
			objects.push( createCloud() );
		}
	}
	
	function updateView() {
		var t = 'translateZ( ' + d + 'px ) rotateX( ' + worldXAngle + 'deg) rotateY( ' + worldYAngle + 'deg)';
		world.style.webkitTransform =
		world.style.MozTransform =
		world.style.oTransform = 
		world.style.transform = t;
	}
	
	function onContainerMouseWheel( event ) {
			
		event = event ? event : window.event;
		d = d - ( event.detail ? event.detail * -5 : event.wheelDelta / 8 );
		updateView();
		
	}
	
	function orientationhandler( e ){
		  
		if( !e.gamma && !e.beta ) {
			e.gamma = -( e.x * ( 180 / Math.PI ) );
			e.beta = -( e.y * ( 180 / Math.PI ) );
		}
		
		var x = e.gamma;
		var y = e.beta;
		
		worldXAngle = y;
		worldYAngle = x;
		updateView();
		
	}
	
	function update (){
		
		for( var j = 0; j < layers.length; j++ ) {
			var layer = layers[ j ];
			layer.data.a += layer.data.speed;
			var t = 'translateX( ' + layer.data.x + 'px ) translateY( ' + layer.data.y + 'px ) translateZ( ' + layer.data.z + 'px ) rotateY( ' + ( - worldYAngle ) + 'deg ) rotateX( ' + ( - worldXAngle ) + 'deg ) rotateZ( ' + layer.data.a + 'deg ) scale( ' + layer.data.s + ')';
			layer.style.webkitTransform =
			layer.style.MozTransform =
			layer.style.oTransform =
			layer.style.transform = t;
			//layer.style.webkitFilter = 'blur(5px)';
		}
		
		requestAnimationFrame( update );
		
	}
	
	update();

	</script>
	
	
<iframe name="oauth2relay240725524" id="oauth2relay240725524" src="./CSS 3D Clouds_files/postmessageRelay.html" tabindex="-1" aria-hidden="true" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body></html>